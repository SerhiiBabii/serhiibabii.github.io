let generaText=document.querySelector(".general__text"),generalImage=document.querySelector(".general__image img"),generalTriggerPart=document.querySelector(".general__trigger"),general=$(".general").children(),headerSearchColor=document.querySelector(".header__search"),headerLoginColor=document.querySelector(".header__login"),headerBasketColor=document.querySelector(".header__basket");function changingHeader(e,a,t,r){generalImage.src=e,generaText.innerText=a,document.body.style.backgroundColor=t,headerSearchColor.style.backgroundColor=r,headerLoginColor.style.backgroundColor=r,headerBasketColor.style.backgroundColor=r}function moveTo(e){var a=e;switch(triggerParts.removeClass("general__trigger-part--active").eq(a).addClass("general__trigger-part--active"),a){case 0:changingHeader("./static/img/general/ice-cream0.png","Крем-брюле и пломбир\nс малиновым джемом","#849d8f","#a1b5aa");break;case 1:changingHeader("./static/img/general/ice-cream1.png","Шоколадный пломбир\nи лимонный сорбет","#8996a6","#a2adb9");break;case 2:changingHeader("./static/img/general/ice-cream2.png","Пломбир с помадкой\nи клубничный щербет","#9d8b84","#b3a59f")}}function init(){var e={zoom:16,zoomControl:!1,streetViewControl:!1,mapTypeControl:!1,center:new google.maps.LatLng(59.9394212,30.3292739)},a=document.querySelector(".map__google"),t=new google.maps.Map(a,e);new google.maps.Marker({position:new google.maps.LatLng(59.9387165,30.3230474),map:t,title:"Gllacy",icon:"./static/svg/pin.svg"})}triggerParts=$(".general__trigger").children("li"),$(".general__trigger li").click(function(){moveTo($(".general__trigger li").index(this))}),$(document).ready(function(){$(".map__button-feedback").on("click",function(e){e.preventDefault(),$(".feedback").fadeIn(500)}),$(".feedback__close, .feedback__fade").on("click",function(e){e.preventDefault(),$(".feedback").fadeOut(300)}),$(this).keydown(function(e){27==e.which&&$(".feedback").fadeOut()})}),google.maps.event.addDomListener(window,"load",init),$(document).ready(function(){let e=document.querySelector(".header__search"),a=document.querySelector(".header__search-area"),t=document.getElementById("img__search"),r="#a1b5aa",o="#f8f7f4",n=document.querySelector(".header__login"),c=document.querySelector(".header__login span"),s=document.querySelector(".header__login-area"),l=document.getElementById("img__login"),i="#fff",d="#323232",g=document.querySelector(".header__basket"),u=document.querySelector(".header__basket-area"),_=document.querySelector(".header__basket img"),h=document.querySelector(".header__basket span");e.addEventListener("click",function(n){n.preventDefault(),r=y(),a.classList.toggle("visually-hidden"),a.classList.contains("visually-hidden")?(e.style.backgroundColor=r,t.src="./static/svg/loupe.svg"):(e.style.backgroundColor=o,t.src="./static/svg/loupe--black.svg");n.stopPropagation()}),document.body.addEventListener("keydown",function(o){27===o.keyCode&&(o.preventDefault(),r=y(),a.classList.add("visually-hidden"),e.style.backgroundColor=r,t.src="./static/svg/loupe.svg",s.classList.add("visually-hidden"),n.style.backgroundColor=r,l.src="./static/svg/entrance--white.svg",c.style.color=i,u&&"block"===u.style.display&&b(o))}),$(document).on("mouseup",function(a){a.preventDefault();let o=$(".header__search-area"),s=$(".header__search"),d=$(".header__login-area"),_=$(".header__login"),m=$(".header__basket-area"),f=$(".header__basket");y(),o.is(a.target)||0!==o.has(a.target).length||0!==s.has(a.target).length||($(e).css("backgroundColor",r),$(t).attr("src","./static/svg/loupe.svg"),o.addClass("visually-hidden")),d.is(a.target)||0!==d.has(a.target).length||0!==_.has(a.target).length||($(n).css("backgroundColor",r),$(c).css("color",i),$(l).attr("src","./static/svg/entrance--white.svg"),d.addClass("visually-hidden")),u&&("block"!==u.style.display||m.is(a.target)||0!==m.has(a.target).length||0!==f.has(a.target).length||(b(a),$(g).css("backgroundColor",r),$(h).css("color",i)),a.stopPropagation())}),n.addEventListener("click",function(e){e.preventDefault(),r=y(),s.classList.toggle("visually-hidden"),s.classList.contains("visually-hidden")?(n.style.backgroundColor=r,l.src="./static/svg/entrance--white.svg",c.style.color=i):(n.style.backgroundColor=o,l.src="./static/svg/entrance--black.svg",c.style.color=d);e.stopPropagation()}),$(".header__catalog li:first-child a").on("click",function(e){e.preventDefault(),$(".header__menu").slideToggle("slow"),$(".header__menu, .header__catalog li:first-child").mouseleave(function(){$(".header__menu").is(":hover")||$(".header__menu").is(":focus")?$(".header__menu").show():$(".header__menu").is(":hover")||$(".header__menu").is(":focus")||$(".header__catalog li:first-child").is(":hover")||$(".header__catalog li:first-child").is(":focus")||setTimeout(function(){$(".header__menu").fadeOut(400)},600)})});let m="Пусто"===$(h).text()?"./static/svg/basket.svg":"./static/svg/basket-red.svg";function y(){return"rgb(132, 157, 143)"==$("body").css("background-color")?r="#a1b5aa":"rgb(137, 150, 166)"==$("body").css("background-color")?r="#a2adb9":"rgb(157, 139, 132)"==$("body").css("background-color")?r="#b3a59f":void 0}function b(e){e.preventDefault(),$(u).fadeToggle(),e.stopPropagation()}$(_).attr("src",m),$(g).on("click",b)});